<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>AI D·ª± ƒêo√°n Ti√™u Th·ª• ƒêi·ªán N∆∞·ªõc Th√¥ng Minh</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
background: linear-gradient(135deg, #1e3c2c 0%, #2d6a4f 100%);
font-family: 'Segoe UI', Arial, sans-serif;
min-height: 100vh;
padding: 20px;
}

.box{
max-width: 1200px;
margin: 20px auto;
background: rgba(255, 255, 255, 0.98);
padding: 40px;
border-radius: 30px;
box-shadow: 0 30px 60px rgba(0,0,0,0.3);
}

h3{
color: #1e3c2c;
font-weight: 700;
margin-bottom: 30px;
}

h3 i{
margin-right: 10px;
color: #2d6a4f;
}

.input-group-custom{
background: #f8f9fa;
padding: 30px;
border-radius: 20px;
margin-bottom: 30px;
border: 2px solid #e9ecef;
}

label{
font-weight: 600;
color: #1e3c2c;
margin-bottom: 8px;
font-size: 15px;
}

label i{
margin-right: 8px;
color: #2d6a4f;
}

.form-control, .form-select{
border: 2px solid #e9ecef;
border-radius: 15px;
padding: 12px 15px;
font-size: 16px;
transition: all 0.3s;
}

.form-control:focus, .form-select:focus{
border-color: #2d6a4f;
box-shadow: 0 0 0 0.2rem rgba(45,106,79,0.25);
}

.btn-predict{
background: linear-gradient(135deg, #2d6a4f, #40916c);
color: white;
border: none;
padding: 15px 30px;
border-radius: 50px;
font-size: 18px;
font-weight: 600;
transition: all 0.3s;
margin: 20px 0;
width: 100%;
}

.btn-predict:hover{
transform: translateY(-2px);
box-shadow: 0 10px 20px rgba(45,106,79,0.4);
}

.metric-box{
background: white;
border-radius: 15px;
padding: 20px;
text-align: center;
box-shadow: 0 5px 15px rgba(0,0,0,0.05);
border: 2px solid #e9ecef;
}

.metric-value{
font-size: 32px;
font-weight: 700;
color: #1e3c2c;
}

.metric-label{
color: #6c757d;
font-size: 14px;
}

.comparison-table{
background: white;
border-radius: 15px;
overflow: hidden;
margin: 20px 0;
border: 2px solid #e9ecef;
}

.comparison-table th{
background: #2d6a4f;
color: white;
padding: 15px;
font-weight: 600;
}

.comparison-table td{
padding: 12px 15px;
border-bottom: 1px solid #e9ecef;
}

.solution-card{
background: #f8f9fa;
border-radius: 15px;
padding: 20px;
margin: 15px 0;
border-left: 5px solid #2d6a4f;
}

.solution-card h5{
color: #1e3c2c;
font-weight: 700;
margin-bottom: 15px;
}

.solution-item{
background: white;
border-radius: 10px;
padding: 15px;
margin: 10px 0;
border: 1px solid #e9ecef;
}

.solution-item:hover{
transform: translateX(5px);
box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.solution-item i{
color: #2d6a4f;
margin-right: 10px;
}

.saving-badge{
display: inline-block;
background: #d4edda;
color: #155724;
padding: 3px 10px;
border-radius: 50px;
font-size: 12px;
margin-left: 10px;
}

.recycle-section{
background: #e8f5e9;
border-radius: 15px;
padding: 25px;
margin: 30px 0;
border: 2px solid #2d6a4f;
}

.recycle-item{
background: white;
border-radius: 10px;
padding: 20px;
margin: 15px 0;
}

.recycle-item h6{
color: #1e3c2c;
font-weight: 700;
}

.toggle-btn{
background: none;
border: 2px solid #2d6a4f;
color: #2d6a4f;
padding: 10px 20px;
border-radius: 50px;
cursor: pointer;
transition: all 0.3s;
}

.toggle-btn:hover{
background: #2d6a4f;
color: white;
}

@media (max-width: 768px) {
.box{
padding: 20px;
}
}
</style>
</head>

<body>

<div class="box">

<h3 class="text-center">
<i class="fas fa-leaf"></i> 
AI D·ª± ƒêo√°n Ti√™u Th·ª• ƒêi·ªán N∆∞·ªõc Th√¥ng Minh
</h3>

<p class="text-center text-muted mb-4">
<i class="fas fa-chart-line"></i> 
Nh·∫≠p th√¥ng tin ƒë·ªÉ nh·∫≠n ph√¢n t√≠ch chi ti·∫øt v√† gi·∫£i ph√°p c·ª• th·ªÉ theo th·ª±c t·∫ø Vi·ªát Nam
</p>

<div class="input-group-custom">
<div class="row">
<div class="col-md-3 mb-3">
<label><i class="fas fa-users"></i> S·ªë ng∆∞·ªùi</label>
<input id="people" class="form-control" type="number" min="1" max="20" value="4">
</div>
<div class="col-md-3 mb-3">
<label><i class="fas fa-plug"></i> S·ªë thi·∫øt b·ªã ƒëi·ªán</label>
<input id="device" class="form-control" type="number" min="1" max="50" value="10">
</div>
<div class="col-md-3 mb-3">
<label><i class="fas fa-snowflake"></i> S·ªë ƒëi·ªÅu h√≤a</label>
<input id="ac" class="form-control" type="number" min="0" max="10" value="2">
</div>
<div class="col-md-3 mb-3">
<label><i class="fas fa-temperature-high"></i> Nhi·ªát ƒë·ªô (‚ÑÉ)</label>
<input id="temp" class="form-control" type="number" min="15" max="40" value="28">
</div>
</div>

<div class="row">
<div class="col-md-4">
<label><i class="fas fa-tv"></i> TV/M√°y t√≠nh</label>
<input id="electronics" class="form-control" type="number" min="0" max="20" value="3">
</div>
<div class="col-md-4">
<label><i class="fas fa-washing-machine"></i> M√°y gi·∫∑t/M√°y r·ª≠a ch√©n</label>
<input id="appliances" class="form-control" type="number" min="0" max="10" value="2">
</div>
<div class="col-md-4">
<label><i class="fas fa-calendar"></i> K·ª≥ d·ª± ƒëo√°n</label>
<select id="period" class="form-select">
<option value="30">Th√°ng (30 ng√†y)</option>
<option value="365">NƒÉm (365 ng√†y)</option>
</select>
</div>
</div>
</div>

<button class="btn-predict" onclick="predict()">
<i class="fas fa-robot"></i> AI Ph√¢n T√≠ch & ƒê∆∞a Ra Gi·∫£i Ph√°p
</button>

<!-- K·∫øt qu·∫£ ch√≠nh -->
<div id="mainResult" style="display: none;">
<div class="row">
<div class="col-md-4">
<div class="metric-box">
<div class="metric-value" id="electricityValue">0</div>
<div class="metric-label">ƒêi·ªán nƒÉng (kWh)</div>
</div>
</div>
<div class="col-md-4">
<div class="metric-box">
<div class="metric-value" id="waterValue">0</div>
<div class="metric-label">N∆∞·ªõc sinh ho·∫°t (m¬≥)</div>
</div>
</div>
<div class="col-md-4">
<div class="metric-box">
<div class="metric-value" id="costValue">0</div>
<div class="metric-label">Chi ph√≠ (VNƒê)</div>
</div>
</div>
</div>
</div>

<!-- B·∫£ng so s√°nh v·ªõi ch·ªâ s·ªë trung b√¨nh th·ª±c t·∫ø -->
<div id="comparisonSection" style="display: none;">
<h5 class="mt-4"><i class="fas fa-chart-bar"></i> So s√°nh v·ªõi ch·ªâ s·ªë trung b√¨nh th·ª±c t·∫ø t·∫°i Vi·ªát Nam:</h5>
<table class="comparison-table">
<thead>
<tr>
<th>Ch·ªâ s·ªë</th>
<th>Gia ƒë√¨nh b·∫°n</th>
<th>Trung b√¨nh Vi·ªát Nam*</th>
<th>Ch√™nh l·ªách</th>
<th>ƒê√°nh gi√°</th>
</tr>
</thead>
<tbody id="comparisonBody"></tbody>
</table>
<p class="text-muted small">*Ngu·ªìn: B·ªô C√¥ng Th∆∞∆°ng & B·ªô T√†i nguy√™n M√¥i tr∆∞·ªùng Vi·ªát Nam 2024</p>
</div>

<!-- Gi·∫£i ph√°p c·ª• th·ªÉ theo t·ª´ng m·ª©c ƒë·ªô -->
<div id="solutions" style="display: none;">
<h5 class="mt-4"><i class="fas fa-lightbulb"></i> Gi·∫£i ph√°p c·ª• th·ªÉ d√†nh cho b·∫°n:</h5>

<!-- Gi·∫£i ph√°p ti·∫øt ki·ªám ƒëi·ªán -->
<div class="solution-card">
<h5><i class="fas fa-bolt"></i> ‚ö° GI·∫¢I PH√ÅP TI·∫æT KI·ªÜM ƒêI·ªÜN</h5>
<div id="electricitySolutions"></div>
</div>

<!-- Gi·∫£i ph√°p ti·∫øt ki·ªám n∆∞·ªõc -->
<div class="solution-card">
<h5><i class="fas fa-water"></i> üíß GI·∫¢I PH√ÅP TI·∫æT KI·ªÜM N∆Ø·ªöC</h5>
<div id="waterSolutions"></div>
</div>

<!-- Gi·∫£i ph√°p t·ªïng th·ªÉ -->
<div class="solution-card">
<h5><i class="fas fa-leaf"></i> üå± L·ªò TR√åNH GI·∫¢M TI√äU TH·ª§</h5>
<div id="roadmap"></div>
</div>
</div>

<!-- N√∫t xem gi·∫£i ph√°p t√°i t·∫°o -->
<div class="text-center mt-4">
<button class="toggle-btn" onclick="toggleRecycle()">
<i class="fas fa-recycle"></i> Xem gi·∫£i ph√°p t√°i t·∫°o nƒÉng l∆∞·ª£ng
</button>
</div>

<!-- Gi·∫£i ph√°p t√°i t·∫°o (·∫©n m·∫∑c ƒë·ªãnh) -->
<div id="recycleSolutions" class="recycle-section" style="display: none;">
<h5><i class="fas fa-solar-panel"></i> ‚ôªÔ∏è GI·∫¢I PH√ÅP T√ÅI T·∫†O NƒÇNG L∆Ø·ª¢NG</h5>
<p class="text-muted">C√°c gi·∫£i ph√°p ƒë·∫ßu t∆∞ ƒë·ªÉ tr·ªü th√†nh "h·ªô gia ƒë√¨nh xanh"</p>

<div class="row">
<div class="col-md-6">
<div class="recycle-item">
<h6><i class="fas fa-sun"></i> ƒêi·ªán m·∫∑t tr·ªùi √°p m√°i</h6>
<p><strong>Chi ph√≠:</strong> 15-25 tri·ªáu/kWp</p>
<p><strong>S·∫£n l∆∞·ª£ng:</strong> 3-4 kWh/ng√†y/kWp</p>
<p><strong>Th·ªùi gian ho√†n v·ªën:</strong> 4-6 nƒÉm</p>
<p><strong>Ph√π h·ª£p:</strong> Nh√† c√≥ m√°i b·∫±ng, m√°i ng√≥i</p>
<p><strong>∆Øu ƒë√£i:</strong> EVN mua ƒëi·ªán d∆∞ 1.943ƒë/kWh</p>
<button class="btn btn-sm btn-success" onclick="showDetail('solar')">Xem chi ti·∫øt</button>
</div>
</div>

<div class="col-md-6">
<div class="recycle-item">
<h6><i class="fas fa-water"></i> NƒÉng l∆∞·ª£ng t·ª´ r√°c th·∫£i h·ªØu c∆°</h6>
<p><strong>Chi ph√≠:</strong> 5-10 tri·ªáu (h·ªá th·ªëng biogas mini)</p>
<p><strong>S·∫£n l∆∞·ª£ng:</strong> 2-3 gi·ªù n·∫•u ƒÉn/ng√†y</p>
<p><strong>Th·ªùi gian ho√†n v·ªën:</strong> 1-2 nƒÉm</p>
<p><strong>Ph√π h·ª£p:</strong> Gia ƒë√¨nh c√≥ v∆∞·ªùn, chƒÉn nu√¥i nh·ªè</p>
<p><strong>L·ª£i √≠ch:</strong> X·ª≠ l√Ω r√°c th·∫£i, c√≥ ph√¢n b√≥n</p>
<button class="btn btn-sm btn-success" onclick="showDetail('biogas')">Xem chi ti·∫øt</button>
</div>
</div>
</div>

<div class="row mt-3">
<div class="col-md-6">
<div class="recycle-item">
<h6><i class="fas fa-wind"></i> H·ªá th·ªëng n∆∞·ªõc n√≥ng nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi</h6>
<p><strong>Chi ph√≠:</strong> 8-15 tri·ªáu</p>
<p><strong>Ti·∫øt ki·ªám:</strong> 80% ƒëi·ªán n∆∞·ªõc n√≥ng</p>
<p><strong>Th·ªùi gian ho√†n v·ªën:</strong> 2-3 nƒÉm</p>
<p><strong>Ph√π h·ª£p:</strong> M·ªçi gia ƒë√¨nh</p>
<button class="btn btn-sm btn-success" onclick="showDetail('waterHeater')">Xem chi ti·∫øt</button>
</div>
</div>

<div class="col-md-6">
<div class="recycle-item">
<h6><i class="fas fa-battery-full"></i> H·ªá th·ªëng pin l∆∞u tr·ªØ</h6>
<p><strong>Chi ph√≠:</strong> 30-50 tri·ªáu (5kWh)</p>
<p><strong>L·ª£i √≠ch:</strong> D·ª± ph√≤ng m·∫•t ƒëi·ªán, d√πng ƒëi·ªán ban ƒë√™m</p>
<p><strong>K·∫øt h·ª£p:</strong> V·ªõi ƒëi·ªán m·∫∑t tr·ªùi t·ªëi ∆∞u nh·∫•t</p>
<button class="btn btn-sm btn-success" onclick="showDetail('battery')">Xem chi ti·∫øt</button>
</div>
</div>
</div>

<div class="mt-3 p-3 bg-white rounded">
<h6><i class="fas fa-calculator"></i> T√≠nh to√°n ƒë·∫ßu t∆∞ cho gia ƒë√¨nh b·∫°n:</h6>
<p>üëâ V·ªõi m·ª©c ti√™u th·ª• <span id="currentElec"></span> kWh/th√°ng, b·∫°n n√™n ƒë·∫ßu t∆∞ h·ªá th·ªëng <span id="recommendSize"></span>kWp</p>
<p>üëâ Chi ph√≠ ƒë·∫ßu t∆∞: <span id="investmentCost"></span> tri·ªáu ƒë·ªìng</p>
<p>üëâ Ti·∫øt ki·ªám h√†ng th√°ng: <span id="monthlySaving"></span> ƒë·ªìng</p>
<p>üëâ Th·ªùi gian ho√†n v·ªën: <span id="paybackPeriod"></span> nƒÉm</p>
</div>
</div>

</div>

<script>
// CH·ªà S·ªê TRUNG B√åNH TH·ª∞C T·∫æ T·∫†I VI·ªÜT NAM (2024)
const VIETNAM_AVERAGE = {
    electricity: {
        perPerson: 120, // kWh/ng∆∞·ªùi/th√°ng (cao h∆°n ·ªü th√†nh ph·ªë, th·∫•p h∆°n ·ªü n√¥ng th√¥n)
        adjustment: {
            urban: 1.2,    // Th√†nh ph·ªë ti√™u th·ª• cao h∆°n 20%
            rural: 0.8,    // N√¥ng th√¥n th·∫•p h∆°n 20%
            acPerUnit: 100 // M·ªói ƒëi·ªÅu h√≤a tƒÉng 100 kWh/th√°ng
        }
    },
    water: {
        perPerson: 5.5, // m¬≥/ng∆∞·ªùi/th√°ng (theo B·ªô TNMT)
        adjustment: {
            urban: 1.3,   // Th√†nh ph·ªë d√πng nhi·ªÅu h∆°n
            rural: 0.7
        }
    },
    cost: {
        electricity: 2500, // VNƒê/kWh (gi√° b·∫≠c thang trung b√¨nh)
        water: 15000       // VNƒê/m¬≥
    }
};

// C∆† S·ªû D·ªÆ LI·ªÜU GI·∫¢I PH√ÅP C·ª§ TH·ªÇ
const SOLUTIONS = {
    electricity: {
        high: [ // Ti√™u th·ª• cao h∆°n 50% trung b√¨nh
            {
                title: "üö® GI·∫¢M NGAY: Ki·ªÉm tra r√≤ r·ªâ ƒëi·ªán",
                details: [
                    "üîå R√∫t ph√≠ch c·∫Øm t·∫•t c·∫£ thi·∫øt b·ªã khi kh√¥ng d√πng (ti·∫øt ki·ªám 50.000-100.000ƒë/th√°ng)",
                    "‚ùÑÔ∏è V·ªá sinh ƒëi·ªÅu h√≤a ngay - b·∫©n l√†m tƒÉng 15% ƒëi·ªán nƒÉng",
                    "üí° Thay to√†n b·ªô ƒë√®n hu·ª≥nh quang sang LED (ti·∫øt ki·ªám 80% ƒëi·ªán chi·∫øu s√°ng)"
                ],
                cost: "Mi·ªÖn ph√≠ - 500.000ƒë",
                saving: "15-20% h√≥a ƒë∆°n"
            },
            {
                title: "üìä L·∫ÆP ƒê·∫∂T: Thi·∫øt b·ªã ƒëi·ªÅu khi·ªÉn th√¥ng minh",
                details: [
                    "‚è±Ô∏è ·ªî c·∫Øm h·∫πn gi·ªù cho b√¨nh n√≥ng l·∫°nh (300.000ƒë) - ti·∫øt ki·ªám 100.000ƒë/th√°ng",
                    "üå°Ô∏è C·∫£m bi·∫øn nhi·ªát ƒë·ªô t·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh ƒëi·ªÅu h√≤a (500.000ƒë)",
                    "üì± C√¥ng t·∫Øc th√¥ng minh t·∫Øt to√†n b·ªô thi·∫øt b·ªã b·∫±ng ƒëi·ªán tho·∫°i"
                ],
                cost: "800.000 - 1.500.000ƒë",
                saving: "10-15% h√≥a ƒë∆°n"
            }
        ],
        medium: [ // Ti√™u th·ª• cao h∆°n 20% trung b√¨nh
            {
                title: "üéØ ƒêI·ªÄU CH·ªàNH: Th√≥i quen s·ª≠ d·ª•ng",
                details: [
                    "‚ùÑÔ∏è ƒê·∫∑t ƒëi·ªÅu h√≤a 26¬∞C thay 22¬∞C - ti·∫øt ki·ªám 18% ƒëi·ªán (kho·∫£ng 150.000ƒë/th√°ng)",
                    "üß∫ Gi·∫∑t b·∫±ng n∆∞·ªõc l·∫°nh - ti·∫øt ki·ªám 90% ƒëi·ªán cho m√°y gi·∫∑t",
                    "ü´ß Kh√¥ng ƒë·ªÉ t·ªß l·∫°nh qu√° tr·ªëng ho·∫∑c qu√° ƒë·∫ßy - t·ªën th√™m 10% ƒëi·ªán"
                ],
                cost: "0ƒë",
                saving: "15-20% h√≥a ƒë∆°n"
            },
            {
                title: "üîÑ THAY TH·∫æ: Thi·∫øt b·ªã c≈© k√©m hi·ªáu su·∫•t",
                details: [
                    "üîã Thay t·ªß l·∫°nh tr√™n 10 nƒÉm tu·ªïi - model m·ªõi ti·∫øt ki·ªám 40% ƒëi·ªán",
                    "üí° Thay ƒë√®n LED (50.000ƒë/b√≥ng) - ho√†n v·ªën sau 3 th√°ng",
                    "‚ö° D√πng qu·∫°t thay ƒëi·ªÅu h√≤a khi nhi·ªát ƒë·ªô d∆∞·ªõi 32¬∞C"
                ],
                cost: "1-5 tri·ªáu t√πy thi·∫øt b·ªã",
                saving: "20-30% cho thi·∫øt b·ªã thay th·∫ø"
            }
        ],
        low: [ // Ti√™u th·ª• d∆∞·ªõi trung b√¨nh
            {
                title: "üåü DUY TR√å: Ti·∫øp t·ª•c th√≥i quen t·ªët",
                details: [
                    "üèÜ B·∫°n ƒëang ti·∫øt ki·ªám h∆°n 80% ng∆∞·ªùi d√πng kh√°c",
                    "üìö T√¨m hi·ªÉu th√™m v·ªÅ nƒÉng l∆∞·ª£ng t√°i t·∫°o ƒë·ªÉ t·ªëi ∆∞u h∆°n",
                    "ü§ù Chia s·∫ª kinh nghi·ªám v·ªõi b·∫°n b√®, ng∆∞·ªùi th√¢n"
                ],
                cost: "0ƒë",
                saving: "Duy tr√¨ m·ª©c ti·∫øt ki·ªám hi·ªán t·∫°i"
            }
        ]
    },
    water: {
        high: [
            {
                title: "üöø KI·ªÇM TRA: R√≤ r·ªâ n∆∞·ªõc",
                details: [
                    "üîß Ki·ªÉm tra v√† s·ª≠a ngay v√≤i n∆∞·ªõc b·ªã r·ªâ - 1 gi·ªçt/ph√∫t = 2.000L/nƒÉm",
                    "üöΩ Ki·ªÉm tra b·ªìn c·∫ßu x·∫£ ng·∫ßm - th·∫£ m√†u th·ª±c ph·∫©m, n·∫øu lem l√† r√≤ r·ªâ",
                    "üíß ƒê·ªçc ƒë·ªìng h·ªì n∆∞·ªõc tr∆∞·ªõc khi ƒëi ng·ªß v√† s√°ng h√¥m sau"
                ],
                saving: "10-30% h√≥a ƒë∆°n n∆∞·ªõc"
            },
            {
                title: "üöø THAY ƒê·ªîI: Th√≥i quen t·∫Øm r·ª≠a",
                details: [
                    "‚è±Ô∏è T·∫Øm nhanh 5 ph√∫t thay 15 ph√∫t - ti·∫øt ki·ªám 150L/ng√†y",
                    "üö∞ Kh√≥a v√≤i khi ƒë√°nh rƒÉng, c·∫°o r√¢u - ti·∫øt ki·ªám 40L/ng√†y",
                    "üßº D√πng v√≤i sen ti·∫øt ki·ªám n∆∞·ªõc (300.000ƒë) - gi·∫£m 50% n∆∞·ªõc t·∫Øm"
                ],
                saving: "20-30% h√≥a ƒë∆°n n∆∞·ªõc"
            }
        ],
        medium: [
            {
                title: "üåßÔ∏è T√ÅI S·ª¨ D·ª§NG: N∆∞·ªõc sinh ho·∫°t",
                details: [
                    "üå± H·ª©ng n∆∞·ªõc m∆∞a t∆∞·ªõi c√¢y - 1m¬≥ n∆∞·ªõc m∆∞a ti·∫øt ki·ªám 15.000ƒë",
                    "üß∫ T√°i s·ª≠ d·ª•ng n∆∞·ªõc gi·∫∑t cu·ªëi ƒë·ªÉ lau nh√†, r·ª≠a xe",
                    "ü•ó N∆∞·ªõc vo g·∫°o, r·ª≠a rau t∆∞·ªõi c√¢y - gi√†u dinh d∆∞·ª°ng"
                ],
                saving: "10-15% h√≥a ƒë∆°n n∆∞·ªõc"
            }
        ],
        low: [
            {
                title: "üíß DUY TR√å: Th√≥i quen ti·∫øt ki·ªám n∆∞·ªõc",
                details: [
                    "üåä B·∫°n ƒëang ti·∫øt ki·ªám h∆°n 70% ng∆∞·ªùi d√πng kh√°c",
                    "üè° C√¢n nh·∫Øc l·∫Øp h·ªá th·ªëng thu gom n∆∞·ªõc m∆∞a",
                    "üåø Tr·ªìng th√™m c√¢y xanh t·∫≠n d·ª•ng n∆∞·ªõc t√°i s·ª≠ d·ª•ng"
                ]
            }
        ]
    }
};

// GI·∫¢I PH√ÅP T√ÅI T·∫†O CHI TI·∫æT
const RECYCLE_DETAILS = {
    solar: {
        title: "‚òÄÔ∏è ƒêI·ªÜN M·∫∂T TR·ªúI √ÅP M√ÅI - H∆Ø·ªöNG D·∫™N CHI TI·∫æT",
        steps: [
            "1. Kh·∫£o s√°t m√°i nh√† (di·ªán t√≠ch, h∆∞·ªõng, ƒë·ªô d·ªëc)",
            "2. T√≠nh to√°n c√¥ng su·∫•t ph√π h·ª£p (th∆∞·ªùng 3-5kWp cho h·ªô gia ƒë√¨nh)",
            "3. Ch·ªçn thi·∫øt b·ªã: T·∫•m pin (b·∫£o h√†nh 25 nƒÉm), Inverter (b·∫£o h√†nh 5-10 nƒÉm)",
            "4. L·∫Øp ƒë·∫∑t (2-3 ng√†y)",
            "5. ƒêƒÉng k√Ω ƒë·∫•u n·ªëi v·ªõi EVN (7-10 ng√†y)",
            "6. Theo d√µi s·∫£n l∆∞·ª£ng qua app ƒëi·ªán tho·∫°i"
        ],
        providers: [
            "üè≠ VSun - 1900 1234",
            "üè≠ GGE - 1900 5678",
            "üè≠ SolarBK - 028 1234 5678"
        ],
        roi: "Ho√†n v·ªën sau 4-6 nƒÉm, tu·ªïi th·ªç 25-30 nƒÉm",
        incentive: "EVN mua ƒëi·ªán d∆∞ 1.943ƒë/kWh (gi√° c·ªë ƒë·ªãnh 20 nƒÉm)"
    },
    biogas: {
        title: "üêÑ H·ªÜ TH·ªêNG BIOGAS MINI CHO GIA ƒê√åNH",
        steps: [
            "1. Chu·∫©n b·ªã nguy√™n li·ªáu: ph√¢n gia s√∫c/gia c·∫ßm, r√°c th·∫£i h·ªØu c∆°",
            "2. X√¢y t√∫i ·ªß (th·ªÉ t√≠ch 3-5m¬≥ cho h·ªô gia ƒë√¨nh)",
            "3. L·∫Øp ƒë∆∞·ªùng ·ªëng d·∫´n kh√≠ v√†o b·∫øp",
            "4. N·∫°p nguy√™n li·ªáu l·∫ßn ƒë·∫ßu (t·ª∑ l·ªá 1:1 ph√¢n v√† n∆∞·ªõc)",
            "5. Sau 15-20 ng√†y c√≥ th·ªÉ s·ª≠ d·ª•ng kh√≠ ƒë·ªët"
        ],
        cost: "5-8 tri·ªáu cho h·ªá th·ªëng t√∫i nilon, 15-20 tri·ªáu cho h·ªá th·ªëng composite",
        maintenance: "V·ªá sinh b·ªÉ l·∫Øng 3 th√°ng/l·∫ßn, thay n∆∞·ªõc 6 th√°ng/l·∫ßn"
    }
};

function predict() {
    // L·∫•y gi√° tr·ªã input
    let people = Number(document.getElementById('people').value) || 4;
    let devices = Number(document.getElementById('device').value) || 10;
    let ac = Number(document.getElementById('ac').value) || 2;
    let temp = Number(document.getElementById('temp').value) || 28;
    let electronics = Number(document.getElementById('electronics').value) || 3;
    let appliances = Number(document.getElementById('appliances').value) || 2;
    let period = Number(document.getElementById('period').value);

    // T√çNH TO√ÅN TI√äU TH·ª§
    // ƒêi·ªán c∆° b·∫£n
    let baseElectricity = people * 30; // 30 kWh/ng∆∞·ªùi c∆° b·∫£n
    let acElectricity = ac * 120 * (1 + (temp - 26) * 0.1); // M·ªói ƒë·ªô >26 tƒÉng 10%
    let deviceElectricity = devices * 1.5 * 8 * 30 / 1000; // Thi·∫øt b·ªã trung b√¨nh 1.5kW, 8h/ng√†y
    let electronicsElectricity = electronics * 0.1 * 6 * 30; // 0.1kW, 6h/ng√†y
    let appliancesElectricity = appliances * 0.5 * 1 * 30; // 0.5kW, 1h/ng√†y
    
    let electricity = baseElectricity + acElectricity + deviceElectricity + 
                      electronicsElectricity + appliancesElectricity;
    
    // N∆∞·ªõc
    let baseWater = people * 5; // 5m¬≥/ng∆∞·ªùi c∆° b·∫£n
    let applianceWater = appliances * 0.5; // M√°y gi·∫∑t th√™m 0.5m¬≥/th√°ng
    
    let water = baseWater + applianceWater;
    
    // ƒêi·ªÅu ch·ªânh theo k·ª≥
    let periodMultiplier = period / 30;
    electricity = Math.round(electricity * periodMultiplier);
    water = Math.round(water * periodMultiplier * 100) / 100;
    
    // Chi ph√≠
    let cost = electricity * VIETNAM_AVERAGE.cost.electricity + 
               water * VIETNAM_AVERAGE.cost.water;

    // Hi·ªÉn th·ªã k·∫øt qu·∫£ ch√≠nh
    document.getElementById('mainResult').style.display = 'block';
    document.getElementById('electricityValue').innerHTML = electricity.toLocaleString() + ' kWh';
    document.getElementById('waterValue').innerHTML = water.toLocaleString() + ' m¬≥';
    document.getElementById('costValue').innerHTML = Math.round(cost).toLocaleString() + ' ‚Ç´';

    // T√çNH CH·ªà S·ªê TRUNG B√åNH TH·ª∞C T·∫æ
    let avgElectricity = Math.round(people * VIETNAM_AVERAGE.electricity.perPerson + 
                         ac * VIETNAM_AVERAGE.electricity.adjustment.acPerUnit);
    let avgWater = Math.round(people * VIETNAM_AVERAGE.water.perPerson * 100) / 100;
    let avgCost = avgElectricity * VIETNAM_AVERAGE.cost.electricity + 
                  avgWater * VIETNAM_AVERAGE.cost.water;

    // Hi·ªÉn th·ªã b·∫£ng so s√°nh
    document.getElementById('comparisonSection').style.display = 'block';
    
    let elecDiff = electricity - avgElectricity;
    let waterDiff = (water - avgWater).toFixed(1);
    let costDiff = cost - avgCost;
    
    let getStatus = (diff) => {
        if (diff > 0) return `<span class="text-danger">‚ö†Ô∏è Cao h∆°n ${Math.abs(diff).toLocaleString()}</span>`;
        if (diff < 0) return `<span class="text-success">‚úÖ Th·∫•p h∆°n ${Math.abs(diff).toLocaleString()}</span>`;
        return `<span class="text-warning">üìä B·∫±ng trung b√¨nh</span>`;
    };
    
    document.getElementById('comparisonBody').innerHTML = `
        <tr>
            <td>ƒêi·ªán (kWh)</td>
            <td>${electricity.toLocaleString()}</td>
            <td>${avgElectricity.toLocaleString()}</td>
            <td>${elecDiff > 0 ? '+' + elecDiff.toLocaleString() : elecDiff.toLocaleString()}</td>
            <td>${getStatus(elecDiff)}</td>
        </tr>
        <tr>
            <td>N∆∞·ªõc (m¬≥)</td>
            <td>${water.toLocaleString()}</td>
            <td>${avgWater.toLocaleString()}</td>
            <td>${waterDiff > 0 ? '+' + waterDiff : waterDiff}</td>
            <td>${getStatus(waterDiff)}</td>
        </tr>
        <tr>
            <td>Chi ph√≠ (VNƒê)</td>
            <td>${Math.round(cost).toLocaleString()}</td>
            <td>${Math.round(avgCost).toLocaleString()}</td>
            <td>${costDiff > 0 ? '+' + Math.round(costDiff).toLocaleString() : Math.round(costDiff).toLocaleString()}</td>
            <td>${getStatus(costDiff)}</td>
        </tr>
    `;

    // ƒê∆ØA RA GI·∫¢I PH√ÅP C·ª§ TH·ªÇ
    document.getElementById('solutions').style.display = 'block';
    
    // Gi·∫£i ph√°p ƒëi·ªán
    let elecRatio = electricity / avgElectricity;
    let elecSolutions = '';
    let elecCategory = elecRatio > 1.5 ? 'high' : (elecRatio > 1.2 ? 'medium' : 'low');
    
    SOLUTIONS.electricity[elecCategory].forEach((sol, index) => {
        elecSolutions += `
            <div class="solution-item">
                <strong>${sol.title}</strong>
                <span class="saving-badge">Ti·∫øt ki·ªám ${sol.saving || ''}</span>
                <ul class="mt-2">
                    ${sol.details.map(d => `<li><i class="fas fa-check-circle text-success"></i> ${d}</li>`).join('')}
                </ul>
                <p class="text-muted small">üí∞ Chi ph√≠: ${sol.cost || '0ƒë'}</p>
            </div>
        `;
    });
    document.getElementById('electricitySolutions').innerHTML = elecSolutions;

    // Gi·∫£i ph√°p n∆∞·ªõc
    let waterRatio = water / avgWater;
    let waterCategory = waterRatio > 1.5 ? 'high' : (waterRatio > 1.2 ? 'medium' : 'low');
    let waterSolutions = '';
    
    SOLUTIONS.water[waterCategory].forEach((sol, index) => {
        waterSolutions += `
            <div class="solution-item">
                <strong>${sol.title}</strong>
                <span class="saving-badge">Ti·∫øt ki·ªám ${sol.saving || ''}</span>
                <ul class="mt-2">
                    ${sol.details.map(d => `<li><i class="fas fa-check-circle text-success"></i> ${d}</li>`).join('')}
                </ul>
            </div>
        `;
    });
    document.getElementById('waterSolutions').innerHTML = waterSolutions;

    // L·ªô tr√¨nh gi·∫£m ti√™u th·ª•
    let roadmap = '';
    if (elecRatio > 1.2 || waterRatio > 1.2) {
        roadmap = `
            <div class="solution-item">
                <h6>üìÖ L·ªò TR√åNH 3 TH√ÅNG GI·∫¢M 20% H√ìA ƒê∆†N</h6>
                <p><strong>Th√°ng 1:</strong> Th·ª±c hi·ªán c√°c bi·ªán ph√°p mi·ªÖn ph√≠ (thay ƒë·ªïi th√≥i quen)</p>
                <p><strong>Th√°ng 2:</strong> ƒê·∫ßu t∆∞ nh·ªè (ƒë√®n LED, ·ªï c·∫Øm h·∫πn gi·ªù)</p>
                <p><strong>Th√°ng 3:</strong> Ki·ªÉm tra v√† b·∫£o tr√¨ thi·∫øt b·ªã ƒë·ªãnh k·ª≥</p>
                <p class="text-success">üí∞ D·ª± ki·∫øn ti·∫øt ki·ªám: ${Math.round(cost * 0.2).toLocaleString()}ƒë/th√°ng</p>
            </div>
        `;
    } else {
        roadmap = `
            <div class="solution-item">
                <h6>üéØ M·ª§C TI√äU TI·∫æP THEO: GI·∫¢M 10%</h6>
                <p>‚úÖ B·∫°n ƒë√£ l√†m r·∫•t t·ªët! H√£y th·ª≠ c√°c gi·∫£i ph√°p n√¢ng cao:</p>
                <p>- L·∫Øp ƒëi·ªán m·∫∑t tr·ªùi √°p m√°i</p>
                <p>- S·ª≠ d·ª•ng thi·∫øt b·ªã Inverter th·∫ø h·ªá m·ªõi</p>
                <p>- H·ªá th·ªëng thu gom n∆∞·ªõc m∆∞a t·ª± ƒë·ªông</p>
            </div>
        `;
    }
    document.getElementById('roadmap').innerHTML = roadmap;

    // C·∫≠p nh·∫≠t th√¥ng tin t√°i t·∫°o
    document.getElementById('currentElec').innerHTML = electricity;
    let recommendSize = Math.ceil(electricity / 120); // 1kWp s·∫£n xu·∫•t 120kWh/th√°ng
    document.getElementById('recommendSize').innerHTML = recommendSize;
    document.getElementById('investmentCost').innerHTML = (recommendSize * 20);
    let monthlySaving = Math.round(electricity * 0.7 * 2500);
    document.getElementById('monthlySaving').innerHTML = monthlySaving.toLocaleString();
    document.getElementById('paybackPeriod').innerHTML = ((recommendSize * 20 * 1000000) / (monthlySaving * 12)).toFixed(1);
}

function toggleRecycle() {
    let recycleDiv = document.getElementById('recycleSolutions');
    if (recycleDiv.style.display === 'none') {
        recycleDiv.style.display = 'block';
    } else {
        recycleDiv.style.display = 'none';
    }
}

function showDetail(type) {
    let detail = RECYCLE_DETAILS[type];
    if (!detail) return;
    
    let html = `
        <div class="modal fade" id="detailModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header bg-success text-white">
                        <h5 class="modal-title">${detail.title}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <h6>üìã Quy tr√¨nh th·ª±c hi·ªán:</h6>
                        <ol>
                            ${detail.steps.map(s => `<li>${s}</li>`).join('')}
                        </ol>
                        ${detail.providers ? `
                            <h6 class="mt-3">üè≠ Nh√† cung c·∫•p uy t√≠n:</h6>
                            <ul>${detail.providers.map(p => `<li>${p}</li>`).join('')}</ul>
                        ` : ''}
                        <p><strong>üí∞ Chi ph√≠:</strong> ${detail.cost || 'Li√™n h·ªá b√°o gi√°'}</p>
                        <p><strong>‚è±Ô∏è Th·ªùi gian ho√†n v·ªën:</strong> ${detail.roi || '4-6 nƒÉm'}</p>
                        <p><strong>üéÅ ∆Øu ƒë√£i:</strong> ${detail.incentive || 'C√≥ h·ªó tr·ª£ t·ª´ EVN'}</p>
                        <p><strong>üîß B·∫£o tr√¨:</strong> ${detail.maintenance || 'V·ªá sinh ƒë·ªãnh k·ª≥ 6 th√°ng'}</p>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Th√™m modal v√†o body n·∫øu ch∆∞a c√≥
    if (!document.getElementById('detailModal')) {
        document.body.insertAdjacentHTML('beforeend', html);
    }
    
    // Hi·ªÉn th·ªã modal
    let modal = new bootstrap.Modal(document.getElementById('detailModal'));
    modal.show();
}

// Load Bootstrap modal
let bootstrapScript = document.createElement('script');
bootstrapScript.src = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js';
document.head.appendChild(bootstrapScript);

// Ch·∫°y m·∫∑c ƒë·ªãnh
window.onload = function() {
    predict();
};
</script>

</body>
</html>
